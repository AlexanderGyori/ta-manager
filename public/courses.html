<html>
    <head>
        <title>TA Manager</title>
        <link href="libraries/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/table.css" rel="stylesheet" />
        <link href="css/modal.css" rel="stylesheet" />
        <script type="text/javascript" src="libraries/knockout-3.4.1/knockout-3.4.1.js"></script>
        <script type="text/javascript" src="libraries/jquery-3.1.1/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="libraries/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/date-tools.js"></script>
        <script type="text/javascript" src="js/table-tools.js"></script>
        <script type="text/javascript" src="libraries/pdfmake/pdfmake.min.js"></script>
        <script type="text/javascript" src="libraries/pdfmake/vfs_fonts.js"></script>
        <script type="text/javascript" src="js/pdf-tools.js"></script>
        <script>
            $(function(){
                $("#navbar").load("navbar.html");
            });
        </script> 
    </head>
    <body>
        <div id="navbar"></div>
        <div class="container">
            <h1>Courses</h1>
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-md-1 control-label">Filter:</label>
                    <div class="col-md-6">
                        <div class="input-group">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                    <span data-bind="text: searchColumnLabel"></span>
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a href="#" data-bind="click: function () { setSearchColumn('courseCode'); }">Course Code</a></li>
                                    <li><a href="#" data-bind="click: function () { setSearchColumn('title'); }">Title</a></li>
                                </ul>
                            </div>
                            <input id="searchBar" type="text" class="form-control" data-bind="textInput: searchTerm" />
                            <div class="input-group-btn">
                                <button class="btn btn-default" type="button" data-bind="click: clearSearchTerm">Clear</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="pull-right">
                            <button class="btn btn-default" data-bind="click: autoAssignTas"><span>Auto-Assign TAs</span></button>
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                <span>Reports </span><span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="#" data-bind="click: displayTermReportModal">Print Term Report</a></li>
                            </ul>
                            <button class="btn btn-default" data-bind="click: displayAddCourseModal"><span class="glyphicon glyphicon-plus"></span></button>
                        </div>
                    </div>
                </div>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th class="columnHeader" data-bind="click: function () { changeOrder('courseCode'); }">Course Code</th>
                        <th class="columnHeader" data-bind="click: function () { changeOrder('title'); }">Title</th>
                        <th class="columnHeader" data-bind="click: function () { changeOrder('studentCount'); }">Students</th>
                        <th class="columnHeader" data-bind="click: function () { changeOrder('startDate'); }">Start Term</th> 
                        <th class="columnHeader" data-bind="click: function () { changeOrder('endDate'); }">End Term</th> 
                        <th class="columnHeader" data-bind="click: function () { changeOrder('hasLab'); }">Lab</th>
                        <th class="columnHeader" data-bind="click: function () { changeOrder('isActive'); }">Active</th>
                        <th class="columnHeader">TAs</th>
                        <th class="columnHeader"><div class="pull-right">Edit&nbsp;&nbsp;</div></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: { data: courseList, as: 'course' }">
                    <!-- ko if: isVisible -->
                    <tr class="parentRow">
                        <td data-toggle="collapse" data-bind="text: courseCode, attr: { 'data-target': '#taList' + $index()}"></td>
                        <td data-toggle="collapse" data-bind="text: title, attr: { 'data-target': '#taList' + $index()}"></td>
                        <td data-toggle="collapse" data-bind="text: studentCount, attr: { 'data-target': '#taList' + $index()}"><span class="badge"></span></td>
                        <td data-toggle="collapse" data-bind="text: startDateTermYear, attr: { 'data-target': '#taList' + $index()}"></td>
                        <td data-toggle="collapse" data-bind="text: endDateTermYear, attr: { 'data-target': '#taList' + $index()}"></td>
                        <td data-toggle="collapse" data-bind="attr: { 'data-target': '#taList' + $index()}"><span data-bind="css: { 'glyphicon-ok': hasLab, 'glyphicon-remove': !hasLab }" class="glyphicon"></span></td>
                        <td data-toggle="collapse" data-bind="attr: { 'data-target': '#taList' + $index()}"><span data-bind="css: { 'glyphicon-ok': isActive, 'glyphicon-remove': !isActive }" class="glyphicon"></span></td>
                        <td data-toggle="collapse" data-bind="text: assignFraction, attr: { 'data-target': '#taList' + $index()}"></td>
                        <td>
                            <div class="pull-right">
                                <div class="dropdown">
                                    <button type="button" class="btn btn-default dropdown-toggle dropdown" data-toggle="dropdown">
                                        <span class="glyphicon glyphicon-menu-hamburger"></span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" data-bind="click: $parent.displayEditCourseModal">Edit course</a></li>
                                        <li><a href="#" data-bind="click: $parent.displayAssignTaModal">Assign TA</a></li>
                                        <li class="divider"></li>
                                        <li><a href="#" data-bind="click: $parent.printCourseAssignedReport">Print currently assigned report</a></li>
                                        <li><a href="#" data-bind="click: $parent.printCoursePreviouslyAssignedReport">Print previously assigned report</a></li>
                                        <li class="divider"></li>
                                        <li><a href="#" data-bind="click: $parent.displayRemoveCourseModal">Remove course</a></li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr class="collapse" data-bind="attr: { id: 'taList' + $index()}">
                        <td colspan="9">
                            <table class="table childTable" data-bind="foreach: { data: course.taList, as: 'ta' }">
                                <tr class="childRow">
                                    <td data-bind="text: ta.userId"></td>
                                    <td data-bind="text: ta.name"></td>
                                    <td data-bind="text: ta.email"></td>
                                    <td data-bind="text: ta.studentType"></td>
                                    <td data-bind="text: ta.studentNumber"></td>
                                    <td data-bind="text: ta.assignType"></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <!-- /ko -->
                </tbody>
            </table>
            <div class="row">
                <div class="col-md-6">
                    <div class="pull-left">
                        <!--<button class="btn btn-default" data-bind="click: testLogin"><span>Login</span></button>
                        <button class="btn btn-default" data-bind="click: testProfile"><span>View Profile</span></button>
                        <button class="btn btn-default" data-bind="click: testLogout"><span>Logout</span></button>-->
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="pull-right">
                        <button class="btn btn-default" data-bind="click: autoAssignTas"><span>Auto-Assign TAs</span></button>
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span>Reports </span><span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#" data-bind="click: displayTermReportModal">Print Term Report</a></li>
                        </ul>
                        <button class="btn btn-default" data-bind="click: displayAddCourseModal"><span class="glyphicon glyphicon-plus"></span></button>
                    </div>
                </div>
            </div>
        </div>
        <div id="addCourseModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bind="click: closeAddCourseModal"><span>&times;</span></button>
                        <h4 class="modal-title">Add a Course</h4>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-md-6 form-group" data-bind="css: {'has-error': addCourseModal.hasCourseCodeError }">
                                    <label>Course Code</label>
                                    <input type="text" class="form-control" data-bind="value: addCourseModal.courseCode" placeholder="Required"/>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>Title</label>
                                    <input type="text" class="form-control" data-bind="value: addCourseModal.title" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 form-group" data-bind="css: {'has-error': addCourseModal.hasDateError }">
                                    <label>Start Term</label>
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                <span data-bind="text: addCourseModal.startDateTermLabel"></span>
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setStartDateTerm(''); }">Term</a></li>
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setStartDateTerm('Fall'); }">Fall</a></li>
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setStartDateTerm('Winter'); }">Winter</a></li>
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setStartDateTerm('Summer'); }">Summer</a></li>
                                            </ul>
                                            <input type="number" placeholder="Year" class="form-control" data-bind="value: addCourseModal.startDateYear" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 form-group" data-bind="css: {'has-error': addCourseModal.hasDateError }">
                                    <label>End Term</label>
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                <span data-bind="text: addCourseModal.endDateTermLabel"></span>
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setEndDateTerm(''); }">Term</a></li>
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setEndDateTerm('Fall'); }">Fall</a></li>
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setEndDateTerm('Winter'); }">Winter</a></li>
                                                <li><a href="#" data-bind="click: function () { addCourseModal.setEndDateTerm('Summer'); }">Summer</a></li>
                                            </ul>
                                            <input type="number" placeholder="Year" class="form-control" data-bind="value: addCourseModal.endDateYear" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    <label>Number of Students</label>
                                    <input type="number" class="form-control" data-bind="value: addCourseModal.studentCount" />
                                </div>
                                <div class="col-md-6 form-group">
                                    <div class="row">
                                        <div class="checkbox col-md-12 form-group">
                                            <label>
                                                <input type="checkbox" data-bind="checked: addCourseModal.hasLab" />Lab
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="checkbox col-md-12 form-group">
                                            <label>
                                                <input type="checkbox" class="checkbox" data-bind="checked: addCourseModal.isActive" />Active
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bind="click: function () { addCourse(addCourseModal) } ">Add</button>
                        <button type="button" class="btn btn-default" data-bind="click: closeAddCourseModal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="editCourseModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bind="click: closeEditCourseModal"><span>&times;</span></button>
                        <h4 class="modal-title">Edit a Course</h4>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-md-6 form-group" data-bind="css: {'has-error': editCourseModal.hasCourseCodeError }">
                                    <label>Course Code</label>
                                    <input type="text" class="form-control" data-bind="value: editCourseModal.courseCode" placeholder="Required" />
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>Title</label>
                                    <input type="text" class="form-control" data-bind="value: editCourseModal.title" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 form-group" data-bind="css: {'has-error': editCourseModal.hasDateError }">
                                    <label>Start Term</label>
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                <span data-bind="text: editCourseModal.startDateTermLabel"></span>
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setStartDateTerm(''); }">Term</a></li>
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setStartDateTerm('Fall'); }">Fall</a></li>
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setStartDateTerm('Winter'); }">Winter</a></li>
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setStartDateTerm('Summer'); }">Summer</a></li>
                                            </ul>
                                            <input type="number" placeholder="Year" class="form-control" data-bind="value: editCourseModal.startDateYear" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 form-group" data-bind="css: {'has-error': editCourseModal.hasDateError }">
                                    <label>End Term</label>
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                <span data-bind="text: editCourseModal.endDateTermLabel"></span>
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setEndDateTerm(''); }">Term</a></li>
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setEndDateTerm('Fall'); }">Fall</a></li>
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setEndDateTerm('Winter'); }">Winter</a></li>
                                                <li><a href="#" data-bind="click: function () { editCourseModal.setEndDateTerm('Summer'); }">Summer</a></li>
                                            </ul>
                                            <input type="number" placeholder="Year" class="form-control" data-bind="value: editCourseModal.endDateYear" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 form-group">
                                    <label>Number of Students</label>
                                    <input type="number" class="form-control" data-bind="value: editCourseModal.studentCount" />
                                </div>
                                <div class="col-md-6 form-group">
                                    <div class="row">
                                        <div class="checkbox col-md-12 form-group">
                                            <label>
                                                <input type="checkbox" data-bind="checked: editCourseModal.hasLab" />Lab
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="checkbox col-md-12 form-group">
                                            <label>
                                                <input type="checkbox" class="checkbox" data-bind="checked: editCourseModal.isActive" />Active
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bind="click: function () { editCourse(editCourseModal) }">Save</button>
                        <button type="button" class="btn btn-default" data-bind="click: closeEditCourseModal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="removeCourseModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bind="click: closeRemoveCourseModal"><span>&times;</span></button>
                        <h4 class="modal-title">Remove a Course</h4>
                    </div>
                    <div class="modal-body">
                        Are you sure you want to delete this course?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bind="click: function () { removeCourse(removeCourseModal) }">Delete</button>
                        <button type="button" class="btn btn-default" data-bind="click: closeRemoveCourseModal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="assignTaModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg modal-xl" role="document">
                <div class="modal-content">
                    <div class="container-fluid">
                        <div class="modal-header">
                            <button type="button" class="close" data-bind="click: closeAssignTaModal"><span>&times;</span></button>
                            <h4 class="modal-title">Assign TA to Course</h4><h4 class="modal-title" data-bind="text: assignTaModal.title"></h4>
                            <div><span>Number of TAs assigned: </span><span data-bind="text: assignTaModal.assignFraction"></span></div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div><span>140hr units in full assignment: </span><span data-bind="text: assignTaModal.taFullAssignValue"></span></div>
                                    <div><span>140hr units in half assignment: </span><span data-bind="text: assignTaModal.taHalfAssignValue"></span></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h3>Unassigned</h3>
                                            <div class="form-horizontal">
                                                <div class="form-group">
                                                    <label class="col-md-2 control-label">Filter:</label>
                                                    <div class="col-md-10">
                                                        <div class="input-group">
                                                            <div class="input-group-btn">
                                                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                                                    <span data-bind="text: assignTaModal.searchColumnLabel"></span>
                                                                    <span class="caret"></span>
                                                                </button>
                                                                <ul class="dropdown-menu">
                                                                    <li><a href="#" data-bind="click: function () { assignTaModal.setSearchColumn('userId'); }">User Id</a></li>
                                                                    <li><a href="#" data-bind="click: function () { assignTaModal.setSearchColumn('name'); }">Name</a></li>
                                                                    <li><a href="#" data-bind="click: function () { assignTaModal.setSearchColumn('email'); }">Email</a></li>
                                                                    <li><a href="#" data-bind="click: function () { assignTaModal.setSearchColumn('studentNumber'); }">Student Number</a></li>
                                                                </ul>
                                                            </div>
                                                            <input id="taAssignmentSearchBar" type="text" class="form-control" data-bind="textInput: assignTaModal.searchTerm" />
                                                            <div class="input-group-btn">
                                                                <button class="btn btn-default" type="button" data-bind="click: assignTaModal.clearSearchTerm">Clear</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeUnassignedOrder('unassignedUserIdOrder') }">User Id</th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeUnassignedOrder('unassignedNameOrder') }">Name</th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeUnassignedOrder('unassignedEmailOrder') }">Email</th>
                                                        <th class="columnHeader">Assignment</th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeUnassignedOrder('unassignedIsActiveOrder') }">Active</th>
                                                        <th class="columnHeader"></th>
                                                        <th class="columnHeader"></th>
                                                    </tr>
                                                </thead>
                                                <tbody data-bind="foreach: { data: assignTaModal.unassignedTas, as: 'ta' }">
                                                    <!-- ko if: isVisible -->
                                                    <tr class="parentRow" data-bind="css: {'highlighted': ta.previouslyAssigned}">
                                                        <td data-bind="text: ta.userId"></td>
                                                        <td data-bind="text: ta.name"></td>
                                                        <td data-bind="text: ta.email"></td>
                                                        <td class="btn-group">
                                                            <button class="btn btn-default" data-bind="click: function () { $parent.assignTaModal.toggleUnassignedAssignType(ta); }, css: { 'btn-primary active': ta.assignType().toUpperCase() === 'FULL' }">Full</button>
                                                            <button class="btn btn-default" data-bind="click: function () { $parent.assignTaModal.toggleUnassignedAssignType(ta); }, css: { 'btn-primary active': ta.assignType().toUpperCase() === 'HALF' }">Half</button>
                                                        </td>
                                                        <td><span data-bind="css: { 'glyphicon-ok': ta.isActive, 'glyphicon-remove': !ta.isActive }" class="glyphicon"></span></td>
                                                        <td><span data-bind="text: ta.assignFraction"></span></td>
                                                        <td><button class="btn btn-default pull-right" data-bind="click: function () { $parent.assignTa(ta.userId, $parent.assignTaModal.courseId(), ta.assignType(), true, function () { $parent.assignTaModal.moveTaToAssigned(ta.userId); }); }"><span class="glyphicon glyphicon-chevron-right"></span></button></td>
                                                    </tr>
                                                    <!-- /ko -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="pull-left"><h3>Assigned</h3></div>
                                            <div class="pull-right">
                                                <a tabindex="0" class="btn btn-default popoverBtn" role="button" data-toggle="popover" data-trigger="focus" title="Recommended Assignments">
                                                    <span class="glyphicon glyphicon-info-sign"></span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="table" style="">
                                                <thead>
                                                    <tr>
                                                        <th class="columnHeader"></th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeAssignedOrder('assignedUserIdOrder') }">User Id</th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeAssignedOrder('assignedNameOrder') }">Name</th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeAssignedOrder('assignedEmailOrder') }">Email</th>
                                                        <th class="columnHeader">Assignment</th>
                                                        <th class="columnHeader" data-bind="click: function () { assignTaModal.changeAssignedOrder('assignedIsActiveOrder') }">Active</th>
                                                        <th class="columnHeader"></th>
                                                    </tr>
                                                </thead>
                                                <tbody data-bind="foreach: { data: assignTaModal.assignedTas, as: 'ta' }">
                                                    <tr class="parentRow">
                                                        <td><button class="btn btn-default pull-left" data-bind="click: $parent.unassignTa"><span class="glyphicon glyphicon-chevron-left"></span></button></td>
                                                        <td data-bind="text: ta.userId"></td>
                                                        <td data-bind="text: ta.name"></td>
                                                        <td data-bind="text: ta.email"></td>
                                                        <td class="btn-group">
                                                            <button class="btn btn-default" data-bind="click: function () { $parent.assignTaModal.updateCourseTaAssignment(ta); }, css: { 'btn-primary active': ta.assignType().toUpperCase() === 'FULL' }">Full</button>
                                                            <button class="btn btn-default" data-bind="click: function () { $parent.assignTaModal.updateCourseTaAssignment(ta); }, css: { 'btn-primary active': ta.assignType().toUpperCase() === 'HALF' }">Half</button>
                                                        </td>
                                                        <td><span data-bind="css: { 'glyphicon-ok': ta.isActive, 'glyphicon-remove': !ta.isActive }" class="glyphicon"></span></td>
                                                        <td><span data-bind="text: ta.assignFraction"></span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="autoAssignModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bind="click: closeAutoAssignModal"><span>&times;</span></button>
                        <h4 class="modal-title">Auto-Assign TAs</h4>
                    </div>
                    <div class="modal-body">
                        <!-- ko if: !!autoAssignModal.courseList().length -->
                        <span>Are you sure you wish to proceed with the following assignments?</span>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th class="columnHeader">Course Code</th>
                                    <th class="columnHeader">Title</th>
                                    <th class="columnHeader">Students</th>
                                    <th class="columnHeader">Start Term</th> 
                                    <th class="columnHeader">End Term</th> 
                                    <th class="columnHeader">Lab</th>
                                    <th class="columnHeader">Active</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: { data: autoAssignModal.courseList, as: 'course' }">
                                <tr class="parentRow">
                                    <td data-toggle="collapse" data-bind="text: courseCode, attr: { 'data-target': '#autoAssignTaList' + $index()}"></td>
                                    <td data-toggle="collapse" data-bind="text: title, attr: { 'data-target': '#autoAssignTaList' + $index()}"></td>
                                    <td data-toggle="collapse" data-bind="text: studentCount, attr: { 'data-target': '#autoAssignTaList' + $index()}"><span class="badge"></span></td>
                                    <td data-toggle="collapse" data-bind="text: startDateTermYear, attr: { 'data-target': '#autoAssignTaList' + $index()}"></td>
                                    <td data-toggle="collapse" data-bind="text: endDateTermYear, attr: { 'data-target': '#autoAssignTaList' + $index()}"></td>
                                    <td data-toggle="collapse" data-bind="attr: { 'data-target': '#autoAssignTaList' + $index()}"><span data-bind="css: { 'glyphicon-ok': hasLab, 'glyphicon-remove': !hasLab }" class="glyphicon"></span></td>
                                    <td data-toggle="collapse" data-bind="attr: { 'data-target': '#autoAssignTaList' + $index()}"><span data-bind="css: { 'glyphicon-ok': isActive, 'glyphicon-remove': !isActive }" class="glyphicon"></span></td>
                                </tr>
                                <tr class="collapse in" data-bind="attr: { id: 'autoAssignTaList' + $index()}">
                                    <td colspan="8">
                                        <table class="table childTable" data-bind="foreach: { data: course.taList, as: 'ta' }">
                                            <tr class="childRow">
                                                <td data-bind="text: ta.userId"></td>
                                                <td data-bind="text: ta.name"></td>
                                                <td data-bind="text: ta.email"></td>
                                                <td data-bind="text: ta.studentType"></td>
                                                <td data-bind="text: ta.studentNumber"></td>
                                                <td data-bind="text: ta.assignType"></td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- /ko -->
                        <!-- ko if: !autoAssignModal.courseList().length -->
                        <p>No possible assignments found.  Make sure that TAs and courses are active, and courses have start and end dates.</p>
                        <!-- /ko -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bind="click: function () { confirmAutoAssigns(autoAssignModal.courseList()); }">Confirm</button>
                        <button type="button" class="btn btn-default" data-bind="click: closeAutoAssignModal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="assignmentWarningModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bind="click: closeAssignmentWarningModal"><span>&times;</span></button>
                        <h4 class="modal-title">Warning</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-10">
                                <p>This assignment is not recommended since the TA or course will exceed their recommended assignment values.  Proceed with the assignment?</p>
                            </div>
                            <div class="col-md-2">
                                <div class="pull-right">
                                    <a tabindex="0" class="btn btn-default popoverBtn" role="button" data-toggle="popover" data-trigger="focus" title="Recommended Assignments">
                                        <span class="glyphicon glyphicon-info-sign"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bind="click: function () { assignTa(assignmentWarningModal.userId(), assignmentWarningModal.courseId(), assignmentWarningModal.assignType(), false, assignmentWarningModal.confirmAssignment); }">Yes</button>
                        <button type="button" class="btn btn-default" data-bind="click: closeAssignmentWarningModal">No</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="termReportModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bind="click: closeTermReportModal"><span>&times;</span></button>
                        <h4 class="modal-title">Create Term Report</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6 form-group" data-bind="css: {'has-error': termReportModal.hasDateError }">
                                <label>Start Term</label>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                            <span data-bind="text: termReportModal.startDateTermLabel"></span>
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a href="#" data-bind="click: function () { termReportModal.setStartDateTerm(''); }">Term</a></li>
                                            <li><a href="#" data-bind="click: function () { termReportModal.setStartDateTerm('Fall'); }">Fall</a></li>
                                            <li><a href="#" data-bind="click: function () { termReportModal.setStartDateTerm('Winter'); }">Winter</a></li>
                                            <li><a href="#" data-bind="click: function () { termReportModal.setStartDateTerm('Summer'); }">Summer</a></li>
                                        </ul>
                                        <input type="number" placeholder="Year" class="form-control" data-bind="value: termReportModal.startDateYear" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 form-group" data-bind="css: {'has-error': termReportModal.hasDateError }">
                                <label>End Term</label>
                                <div class="form-inline">
                                    <div class="form-group">
                                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                            <span data-bind="text: termReportModal.endDateTermLabel"></span>
                                            <span class="caret"></span>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a href="#" data-bind="click: function () { termReportModal.setEndDateTerm(''); }">Term</a></li>
                                            <li><a href="#" data-bind="click: function () { termReportModal.setEndDateTerm('Fall'); }">Fall</a></li>
                                            <li><a href="#" data-bind="click: function () { termReportModal.setEndDateTerm('Winter'); }">Winter</a></li>
                                            <li><a href="#" data-bind="click: function () { termReportModal.setEndDateTerm('Summer'); }">Summer</a></li>
                                        </ul>
                                        <input type="number" placeholder="Year" class="form-control" data-bind="value: termReportModal.endDateYear" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-bind="click: termReportModal.printTermReport">Create</button>
                        <button type="button" class="btn btn-default" data-bind="click: closeTermReportModal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
<script type="text/javascript" src="js/courses.js"></script>